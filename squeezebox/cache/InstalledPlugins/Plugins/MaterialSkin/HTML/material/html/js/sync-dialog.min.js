var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(e,d,f){return e==a&&"q"==d&&f==c}}));return!0===c.q}catch(e){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,e){a!=Array.prototype&&a!=Object.prototype&&(a[c]=e.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};$jscomp.polyfill=function(a,c,e,d){if(c){e=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in e||(e[f]={});e=e[f]}a=a[a.length-1];d=e[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),d=Object.seal({}),l=new a([[b,2],[d,3]]);if(2!=l.get(b)||3!=l.get(d))return!1;l.delete(b);l.set(d,4);return!l.has(b)&&4==l.get(d)}catch(m){return!1}}function e(){}function d(b){if(!$jscomp.owns(b,g)){var a=new e;$jscomp.defineProperty(b,g,{value:a})}}function f(b){var a=Object[b];a&&(Object[b]=function(b){if(b instanceof e)return b;d(b);return a(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0,k=function(b){this.id_=(h+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};k.prototype.set=function(b,a){d(b);if(!$jscomp.owns(b,g))throw Error("WeakMap key fail: "+b);b[g][this.id_]=a;return this};k.prototype.get=function(b){return $jscomp.owns(b,g)?b[g][this.id_]:void 0};k.prototype.has=
function(b){return $jscomp.owns(b,g)&&$jscomp.owns(b[g],this.id_)};k.prototype.delete=function(b){return $jscomp.owns(b,g)&&$jscomp.owns(b[g],this.id_)?delete b[g][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var e=d.entries(),c=e.next();if(c.done||c.value[0]!=b||"s"!=c.value[1])return!1;c=e.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!e.next().done?!1:!0}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbolIterator();var e=new WeakMap,d=function(b){this.data_={};this.head_=h();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};d.prototype.set=function(a,d){a=0===a?0:a;var b=f(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=d:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:d},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};d.prototype.delete=function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};d.prototype.has=function(a){return!!f(this,a).entry};
d.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};d.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return g(this,function(a){return a.key})};d.prototype.values=function(){return g(this,function(a){return a.value})};d.prototype.forEach=function(a,d){for(var b=this.entries(),e;!(e=b.next()).done;)e=e.value,a.call(d,e[1],e[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var f=function(a,d){var b=d&&typeof d;"object"==
b||"function"==b?e.has(d)?b=e.get(d):(b=""+ ++k,e.set(d,b)):b="p_"+d;var c=a.data_[b];if(c&&$jscomp.owns(a.data_,b))for(a=0;a<c.length;a++){var f=c[a];if(d!==d&&f.key!==f.key||d===f.key)return{id:b,list:c,index:a,entry:f}}return{id:b,list:c,index:-1,entry:void 0}},g=function(a,d){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:d(b)};b=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new a($jscomp.makeIterator([d]));if(!e.has(d)||1!=e.size||e.add(d)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var c=e.entries(),h=c.next();if(h.done||h.value[0]!=d||h.value[1]!=d)return!1;h=c.next();return h.done||h.value[0]==d||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:c.next().done}catch(k){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbolIterator();var e=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var d;!(d=a.next()).done;)this.add(d.value)}this.size=this.map_.size};e.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};e.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};e.prototype.clear=function(){this.map_.clear();
this.size=0};e.prototype.has=function(a){return this.map_.has(a)};e.prototype.entries=function(){return this.map_.entries()};e.prototype.values=function(){return this.map_.values()};e.prototype.keys=e.prototype.values;e.prototype[Symbol.iterator]=e.prototype.values;e.prototype.forEach=function(a,e){var d=this;this.map_.forEach(function(c){return a.call(e,c,c,d)})};return e},"es6","es3");
Vue.component("lms-sync-dialog",{template:'\n<v-dialog v-model="show" v-if="show" persistent width="600" class="lms-dialog">\n <v-card v-if="player">\n  <v-card-text>\n   <v-container grid-list-md>\n    <v-layout wrap>\n     <v-flex xs12>{{i18n("Select which players you would like to synchronise with \'%1\'.", player.name)}}</v-flex>\n     <v-flex xs12>\n      <v-select chips deletable-chips multiple :items="players" :label="i18n(\'Synchronise players\')" v-model="chosenPlayers" item-text="label" item-value="id">\n       <v-list-tile slot="prepend-item" @click="togglePlayers()" v-if="players.length>1">\n        <v-list-tile-action><v-icon>{{selectAllIcon}}</v-icon></v-list-tile-action>\n        <v-list-tile-title>{{i18n(\'Select All\')}}</v-list-tile-title>\n       </v-list-tile>\n       <v-divider slot="prepend-item"></v-divider>\n      </v-select>\n     </v-flex>\n    </v-layout>\n   </v-container>\n  </v-card-text>\n  <v-card-actions>\n   <v-spacer></v-spacer>\n   <v-btn flat @click.native="close()">{{i18n(\'Cancel\')}}</v-btn>\n   <v-btn flat @click.native="sync()">{{i18n(\'Sync\')}}</v-btn>\n  </v-card-actions>\n </v-card>\n</v-dialog>\n',props:[],
data:function(){return{show:!1,player:void 0,players:[],chosenPlayers:[]}},computed:{selectAllIcon:function(){return this.chosenPlayers.length==this.players.length?"check_box":0<this.chosenPlayers.length?"indeterminate_check_box":"check_box_outline_blank"}},mounted:function(){bus.$on("sync.open",function(a){var c=this;this.player=a;lmsCommand(this.player.id,["sync","?"]).then(function(a){(a=a.data)&&a.result&&void 0!=a.result._sync&&(a=a.result._sync.split(","),c.origSync=0<a.length&&"-"!=a[0]?new Set(a):
new Set,c.players=[],c.chosenPlayers=[],c.$store.state.players.forEach(function(a){a.id!==c.player.id&&(a={id:a.id,label:a.name},c.players.push(a),c.origSync.has(a.id)&&c.chosenPlayers.push(a.id))}),c.show=!0)})}.bind(this));bus.$on("noPlayers",function(){this.show=!1}.bind(this));bus.$on("esc",function(){"sync"==this.$store.state.activeDialog&&(this.show=!1)}.bind(this))},methods:{close:function(){this.show=!1},sync:function(){var a=this;this.show=!1;var c=new Set;this.chosenPlayers.forEach(function(a){c.add(a)});
this.origSync.forEach(function(a){c.has(a)||lmsCommand(a,["sync","-"])});c.forEach(function(c){lmsCommand(a.player.id,["sync",c])});bus.$emit("syncChanged")},togglePlayers:function(){var a=this;this.chosenPlayers.length==this.players.length?this.chosenPlayers=[]:(this.chosenPlayers=[],this.players.forEach(function(c){a.chosenPlayers.push(c.id)}))},i18n:function(a,c){return this.show?i18n(a,c):a}},watch:{show:function(a){this.$store.commit("dialogOpen",{name:"sync",shown:a})}}});
