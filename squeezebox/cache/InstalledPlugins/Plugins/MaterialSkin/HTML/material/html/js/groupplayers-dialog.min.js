var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(d,c,f){return d==a&&"q"==c&&f==b}}));return!0===b.q}catch(d){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var f=a[c];f in d||(d[f]={});d=d[f]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var e=Object.seal({}),c=Object.seal({}),d=new a([[e,2],[c,3]]);if(2!=d.get(e)||3!=d.get(c))return!1;d.delete(e);d.set(c,4);return!d.has(e)&&4==d.get(c)}catch(l){return!1}}function d(){}function c(e){if(!$jscomp.owns(e,g)){var a=new d;$jscomp.defineProperty(e,g,{value:a})}}function f(a){var e=Object[a];e&&(Object[a]=function(a){if(a instanceof d)return a;c(a);return e(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0,k=function(a){this.id_=(h+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var e;!(e=a.next()).done;)e=e.value,this.set(e[0],e[1])}};k.prototype.set=function(a,d){c(a);if(!$jscomp.owns(a,g))throw Error("WeakMap key fail: "+a);a[g][this.id_]=d;return this};k.prototype.get=function(a){return $jscomp.owns(a,g)?a[g][this.id_]:void 0};k.prototype.has=
function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};k.prototype.delete=function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),c=new a($jscomp.makeIterator([[e,"s"]]));if("s"!=c.get(e)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),b=d.next();if(b.done||b.value[0]!=e||"s"!=b.value[1])return!1;b=d.next();return b.done||4!=b.value[0].x||"t"!=b.value[1]||!d.next().done?!1:!0}catch(m){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var d=new WeakMap,c=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};c.prototype.set=function(a,c){a=0===a?0:a;var e=f(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};c.prototype.delete=function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};c.prototype.has=function(a){return!!f(this,a).entry};
c.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};c.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};c.prototype.keys=function(){return g(this,function(a){return a.key})};c.prototype.values=function(){return g(this,function(a){return a.value})};c.prototype.forEach=function(a,c){for(var d=this.entries(),b;!(b=d.next()).done;)b=b.value,a.call(c,b[1],b[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var f=function(a,c){var b=c&&typeof c;"object"==
b||"function"==b?d.has(c)?b=d.get(c):(b=""+ ++k,d.set(c,b)):b="p_"+c;var f=a.data_[b];if(f&&$jscomp.owns(a.data_,b))for(a=0;a<f.length;a++){var e=f[a];if(c!==c&&e.key!==e.key||c===e.key)return{id:b,list:f,index:a,entry:e}}return{id:b,list:f,index:-1,entry:void 0}},g=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return c},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),b=new a($jscomp.makeIterator([c]));if(!b.has(c)||1!=b.size||b.add(c)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var d=b.entries(),h=d.next();if(h.done||h.value[0]!=c||h.value[1]!=c)return!1;h=d.next();return h.done||h.value[0]==c||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:d.next().done}catch(k){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var d=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};d.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};d.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};d.prototype.clear=function(){this.map_.clear();
this.size=0};d.prototype.has=function(a){return this.map_.has(a)};d.prototype.entries=function(){return this.map_.entries()};d.prototype.values=function(){return this.map_.values()};d.prototype.keys=d.prototype.values;d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(d){return a.call(b,d,d,c)})};return d},"es6","es3");
Vue.component("lms-groupplayers-dialog",{template:'\n<v-dialog v-model="show" v-if="show" persistent width="600" class="lms-dialog">\n <v-card>\n  <v-card-title>{{player ? i18n("Edit group player") : i18n("Create group player")}}</v-card-title>\n  <v-form ref="form" v-model="valid" lazy-validation>\n   <v-list two-line>\n    <v-list-tile>\n     <v-list-tile-content>\n      <v-text-field clearable autofocus :label="i18n(\'Name\')" v-model="name" class="lms-search"></v-text-field>\n     </v-list-tile-content>\n    </v-list-tile>\n    <v-list-tile>\n     <v-select chips deletable-chips multiple :items="players" :label="i18n(\'Group members\')" v-model="chosenPlayers" item-text="label" item-value="id">\n      <v-list-tile slot="prepend-item" @click="togglePlayers()" v-if="players.length>1">\n       <v-list-tile-action><v-icon>{{selectAllIcon}}</v-icon></v-list-tile-action>\n       <v-list-tile-title>{{i18n(\'Select All\')}}</v-list-tile-title>\n      </v-list-tile>\n      <v-divider slot="prepend-item"></v-divider>\n     </v-select>\n    </v-list-tile>\n    <v-list-tile>\n     <v-list-tile-content @click="options.powerMaster = !options.powerMaster" class="switch-label">\n      <v-list-tile-title>{{i18n(\'Power on/off all\')}}</v-list-tile-title>\n      <v-list-tile-sub-title>{{i18n("Use group player\'s power settings to control power of all members.")}}</v-list-tile-sub-title>\n     </v-list-tile-content>\n     <v-list-tile-action><v-switch v-model="options.powerMaster"></v-switch></v-list-tile-action>\n    </v-list-tile>\n    <v-divider></v-divider>\n    <v-list-tile>\n     <v-list-tile-content @click="options.powerPlay = !options.powerPlay" class="switch-label">\n      <v-list-tile-title>{{i18n(\'Power on all upon play\')}}</v-list-tile-title>\n      <v-list-tile-sub-title>{{i18n(\'Power on all group members when playing to group.\')}}</v-list-tile-sub-title>\n     </v-list-tile-content>\n     <v-list-tile-action><v-switch v-model="options.powerPlay"></v-switch></v-list-tile-action>\n    </v-list-tile>\n   </v-list>\n  </v-form>\n  <div class="dialog-padding"></div>\n  <v-card-actions>\n   <v-spacer></v-spacer>\n   <v-btn flat @click.native="close()">{{i18n(\'Cancel\')}}</v-btn>\n   <v-btn flat v-if="player" @click.native="update()">{{i18n(\'Update\')}}</v-btn>\n   <v-btn flat v-else @click.native="create()">{{i18n(\'Create\')}}</v-btn>\n  </v-card-actions>\n </v-card>\n</v-dialog>\n',props:[],
data:function(){return{valid:!1,show:!1,player:void 0,name:void 0,options:{powerMaster:!0,powerPlay:!0},players:[],chosenPlayers:[]}},computed:{selectAllIcon:function(){return this.chosenPlayers.length==this.players.length?"check_box":0<this.chosenPlayers.length?"indeterminate_check_box":"check_box_outline_blank"}},mounted:function(){bus.$on("group.open",function(a,b){var d=this;"edit"==a?(this.setDefaults(),this.player=b,this.prevName=this.name=b.name,this.unknownIds=[],lmsCommand(this.player.id,
["playergroup",0,255]).then(function(a){(a=a.data)&&a.result&&(d.options.powerMaster=1==parseInt(a.result.powerMaster),d.options.powerPlay=1==parseInt(a.result.powerPlay),a.result.players_loop&&a.result.players_loop.forEach(function(a){d.playerIds.has(a.id)?d.chosenPlayers.push(a.id):d.unknownIds.push(a.id)}),d.show=!0)})):"create"==a&&(this.setDefaults(),this.show=!0)}.bind(this));bus.$on("noPlayers",function(){this.show=!1}.bind(this));bus.$on("esc",function(){"group"==this.$store.state.activeDialog&&
(this.show=!1)}.bind(this))},methods:{setDefaults:function(){var a=this;this.player=this.prevName=this.name=void 0;this.chosenPlayers=[];this.options={powerMaster:!0,powerPlay:!0};this.players=[];this.playerIds=new Set;this.$store.state.players.forEach(function(b){b.isgroup||(a.players.push({id:b.id,label:b.name}),a.playerIds.add(b.id))})},close:function(){this.show=!1},update:function(){var a=this,b=void 0==this.name?"":this.name.trim();if(!(1>b.length)){var d=[];this.chosenPlayers.forEach(function(a){d.push(a)});
this.unknownIds.forEach(function(a){d.push(a)});var c=["playergroups","update","id:"+this.player.id,"members:"+(0<d.length?d.join(","):"-"),"powerMaster:"+(this.options.powerMaster?1:0),"powerPlay:"+(this.options.powerPlay?1:0)];this.prevName!=b?lmsCommand(this.player.id,["name",b]).then(function(b){lmsCommand("",c).then(function(b){bus.$emit("refreshServerStatus");lmsCommand(a.player.id,["material-skin-modes","set-group"]);a.show=!1})}):lmsCommand("",c).then(function(b){lmsCommand(a.player.id,["material-skin-modes",
"set-group"]);a.show=!1})}},create:function(){var a=this,b=void 0==this.name?"":this.name.trim();1>b.length||lmsCommand("",["playergroups","add","name:"+b,"members:"+this.chosenPlayers.join(","),"powerMaster:"+(this.options.powerMaster?1:0),"powerPlay:"+(this.options.powerPlay?1:0)]).then(function(b){b=b.data;bus.$emit("refreshServerStatus",1E3);b&&b.result&&b.result.id&&lmsCommand(b.result.id,["material-skin-modes","set-group"]);a.show=!1})},togglePlayers:function(){var a=this;this.chosenPlayers.length==
this.players.length?this.chosenPlayers=[]:(this.chosenPlayers=[],this.players.forEach(function(b){a.chosenPlayers.push(b.id)}))},i18n:function(a,b){return this.show?i18n(a,b):a}},watch:{show:function(a){this.$store.commit("dialogOpen",{name:"group",shown:a})}}});
