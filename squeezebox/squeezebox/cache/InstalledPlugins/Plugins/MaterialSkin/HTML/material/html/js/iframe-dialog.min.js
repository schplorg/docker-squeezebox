var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,a){var c=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=c.length,g=b.length;a=Math.max(0,Math.min(a|0,c.length));for(var f=0;f<g&&a<e;)if(c[a++]!=b[f++])return!1;return f>=g}},"es6","es3");
function clickHandler(a){var b=a.target||a.srcElement,c=void 0;if("A"===b.tagName)c=b.getAttribute("href");else if("SPAN"===b.tagName||"IMG"===b.tagName)c=b.parentElement.getAttribute("href");if(void 0!=c&&!c.startsWith("advanced_search.html"))if(0<c.indexOf("command=playlist&subcommand=loadtracks&track.id")||0<c.indexOf("command=playlist&subcommand=addtracks&track.id")){var d=c.split("&");b=["playlistcontrol"];c=0;for(var e=d.length;c<e;++c)d[c].startsWith("subcommand")?b.push("addtracks"==d[c].split("=")[1]?
"cmd:add":"cmd:load"):d[c].startsWith("track.id")&&b.push("track_id:"+d[c].split("=")[1]);b.push("library_id:"+LMS_DEFAULT_LIBRARY);bus.$emit("search-action","playlist",b);a.preventDefault()}else if(0<c.indexOf("command=playlist&subcommand=loadtracks&searchRef")||0<c.indexOf("command=playlist&subcommand=addtracks&searchRef")){d=c.split("&");b=["playlist"];c=0;for(e=d.length;c<e;++c)d[c].startsWith("subcommand")?b.push(d[c].split("=")[1]):d[c].startsWith("searchRef")&&b.push(d[c]);b.push("library_id:"+
LMS_DEFAULT_LIBRARY);bus.$emit("search-action","playlist",b);a.preventDefault()}else 0<c.indexOf("songinfo.html?item=")?(d=c.split("item=")[1].split("&")[0],bus.$emit("search-action","info",d,b.textContent),a.preventDefault()):0<c.indexOf("clicmd=browselibrary+items&mode=albums")?(d=c.split("artist_id=")[1].split("&")[0],b=decodeURIComponent(c.split("linktitle=Artist%20(")[1].split(")&")[0]),bus.$emit("search-action","browse",{command:["albums"],params:["artist_id:"+d,"tags:jlys",SORT_KEY+ARTIST_ALBUM_SORT_PLACEHOLDER,
"library_id:"+LMS_DEFAULT_LIBRARY]},b),a.preventDefault()):0<c.indexOf("clicmd=browselibrary+items&mode=tracks")&&(d=c.split("album_id=")[1].split("&")[0],b=decodeURIComponent(c.split("linktitle=Album%20(")[1].split(")&")[0]),bus.$emit("search-action","browse",{command:["tracks"],params:["album_id:"+d,TRACK_TAGS,SORT_KEY+"tracknum","library_id:"+LMS_DEFAULT_LIBRARY]},b),a.preventDefault());bus.$emit("iframe-loaded")}
function hideClassicSkinElems(a){if(a){var b=document.getElementById("classicSkinIframe");b&&("player"==a?(a=b.contentDocument.createElement("link"),a.href="/material/html/css/classic-skin-mods-player.css?r="+LMS_MATERIAL_REVISION,a.rel="stylesheet",a.type="text/css",b.contentDocument.head.appendChild(a)):"search"==a&&(b.contentDocument.addEventListener?b.contentDocument.addEventListener("click",clickHandler):b.contentDocument.attachEvent&&b.contentDocument.attachEvent("onclick",clickHandler)))}}
Vue.component("lms-iframe-dialog",{template:'\n<div>\n <v-dialog v-model="show" v-if="show" scrollable fullscreen>\n  <v-card>\n   <v-card-title class="settings-title">\n    <v-toolbar color="primary" dark app class="lms-toolbar">\n     <v-btn flat icon @click.native="close"><v-icon>arrow_back</v-icon></v-btn>\n     <v-toolbar-title>{{title}}</v-toolbar-title>\n    </v-toolbar>\n   </v-card-title>\n   <v-card-text class="embedded-page">\n    <div v-if="!loaded" style="width:100%;padding-top:64px;display:flex;justify-content:center;font-size:18px">{{i18n(\'Loading...\')}}</div>\n    <iframe id="classicSkinIframe" v-on:load="hideClassicSkinElems(page)" :src="src" frameborder="0"></iframe>\n   </v-card-text>\n  </v-card>\n </v-dialog>\n <v-snackbar v-model="snackbar.show" :multi-line="true" :timeout="2500" top>{{ snackbar.msg }}</v-snackbar>\n</div>\n',
props:["desktop"],data:function(){return{show:!1,title:void 0,src:void 0,page:void 0,snackbar:{show:!1,msg:void 0},loaded:!1}},mounted:function(){bus.$on("iframe.open",function(a,b){this.title=b;this.src=a;this.page=0<a.indexOf("player/basic.html")?"player":0<a.indexOf("advanced_search.html")?"search":"other";this.show=!0;this.loaded=!1}.bind(this));bus.$on("iframe-loaded",function(){this.loaded=!0}.bind(this));bus.$on("noPlayers",function(){this.close()}.bind(this));bus.$on("esc",function(){"iframe"==
this.$store.state.activeDialog&&this.close()}.bind(this));bus.$on("search-action",function(a,b,c){var d=this;"info"==a?(bus.$emit("trackInfo",{id:"track_id:"+b,title:c},void 0,void 0),this.close()):"browse"==a?(bus.$emit(a,b.command,b.params,c),this.close()):"playlist"==a&&lmsCommand(this.$store.state.player.id,b).then(function(a){bus.$emit("refreshStatus");"cmd:load"==b[1]||"loadtracks"==b[1]?(d.desktop||d.$store.commit("setPage","now-playing"),d.close()):d.snackbar="cmd:add"==b[1]?{show:!0,msg:i18n("Appended track to the play queue")}:
{show:!0,msg:i18n("Appended all tracks to the play queue")}}).catch(function(a){logError(a,command.command)})}.bind(this))},methods:{close:function(){this.show=!1;bus.$emit("iframeClosed",this.isPlayer)},i18n:function(a,b){return this.show&&this.transparent?i18n(a,b):a}},watch:{show:function(a){this.$store.commit("dialogOpen",{name:"iframe",shown:a})}}});
