Vue.component("lms-search-dialog",{template:'\n<v-dialog v-model="show" v-if="show" persistent scrollable width="600">\n <v-card>\n  <v-card-title>{{i18n("Search library")}}</v-card-title>\n  <v-form ref="form" v-model="valid" lazy-validation>\n   <v-list two-line>\n    <v-list-tile>\n     <v-text-field :label="i18n(\'Term\')" clearable v-if="show" v-model="term" class="lms-search" autofocus @keyup.enter="search()"></v-text-field>\n    </v-list-tile>\n    <v-list-tile>\n     <v-select :label="i18n(\'Category\')" :items="categories" v-model="category" item-text="label" item-value="value"></v-select>\n    </v-list-tile>\n   </v-list>\n  </v-form>\n  <v-card-actions>\n   <v-btn flat @click.native="advanced()" id="advanced-search-btn">{{i18n(\'Advanced\')}}</v-btn>\n   <v-spacer></v-spacer>\n   <v-btn flat @click.native="cancel()">{{i18n(\'Cancel\')}}</v-btn>\n   <v-btn flat @click.native="search()">{{i18n(\'Search\')}}</v-btn\n  </v-card-actions>\n </v-card>\n</v-dialog>\n',
props:[],data:function(){return{valid:!1,categories:[],show:!1,category:0,term:""}},mounted:function(){bus.$on("search.open",function(){this.term="";this.show=!0}.bind(this));bus.$on("langChanged",function(){this.initItems()}.bind(this));this.initItems();bus.$on("esc",function(){"search"==this.$store.state.activeDialog&&(this.show=!1)}.bind(this))},methods:{initItems:function(){this.categories=[{label:i18n("All"),value:0},{label:i18n("Artists"),value:1},{label:i18n("Albums"),value:2},{label:i18n("Tracks"),
value:3},{label:i18n("Playlists"),value:4}]},cancel:function(){this.show=!1},advanced:function(){this.cancel();bus.$emit("dlg.open","iframe","/material/advanced_search.html?player="+this.$store.state.player.id,i18n("Advanced search"))},search:function(){var a=this.term.trim();if(1<a.length){this.show=!1;if(0==this.category){var c=["search"];var b=["tags:jlyAdt","extended:1","term:"+a]}else if(1==this.category)c=["artists"],b=["tags:s","search:"+a];else if(2==this.category)c=["albums"],b=[ALBUM_TAGS,
"search:"+a];else if(3==this.category)c=["tracks"],b=[TRACK_TAGS,"search:"+a];else if(4==this.category)c=["playlists"],b=["tags:s","search:"+a];else return;var d=this.$store.state.library?this.$store.state.library:LMS_DEFAULT_LIBRARY;d&&b.push("library_id:"+d);bus.$emit("searchLib",c,b,a);this.show=!1}},i18n:function(a){return this.show?i18n(a):a}},watch:{show:function(a){this.$store.commit("dialogOpen",{name:"search",shown:a})}}});
