Vue.component("lms-rating-dialog",{template:'\n<v-dialog v-model="show" v-if="show" persistent scrollable width="350">\n <v-card>\n  <v-card-title>{{title}}</v-card-title>\n  <v-card-text>\n   <v-layout text-xs-center row wrap>\n    <v-flex xs12 class="np-text">\n     <v-rating large v-if="maxRating>5" v-model="value" half-increments hover clearable></v-rating>\n     <v-rating large v-else v-model="value" hover clearable></v-rating>\n    </v-flex>\n   </v-layout>\n  </v-card-text>\n  <v-card-actions>\n   <v-spacer></v-spacer>\n   <v-btn flat @click.native="cancel()">{{i18n(\'Cancel\')}}</v-btn>\n   <v-btn flat @click.native="apply()">{{i18n(\'Apply\')}}</v-btn>\n  </v-card-actions>\n </v-card>\n</v-dialog>\n',
props:[],data:function(){return{show:!1,title:"",value:0,item:void 0}},computed:{maxRating:function(){return this.$store.state.maxRating}},mounted:function(){bus.$on("rating.open",function(a,b){this.$store.state.player.id&&(this.ids=a,this.title=1<a.length?i18n("Set rating for %1 tracks",a.length):i18n("Set rating"),this.value=void 0==b?3:b/20,this.toSet=void 0,this.show=!0)}.bind(this));bus.$on("noPlayers",function(){this.show=!1}.bind(this));bus.$on("esc",function(){"rating"==this.$store.state.activeDialog&&
(this.show=!1)}.bind(this))},methods:{cancel:function(){this.toSet||(this.show=!1)},apply:function(){var a=this;this.toSet||(this.toSet=[],this.ids.forEach(function(b){a.toSet.push(b.split(":")[1])}),this.setRating())},setRating:function(){var a=this;0==this.toSet.length?(this.toSet=void 0,this.show=!1,bus.$emit("ratingsSet",this.ids,this.value)):lmsCommand(this.$store.state.player.id,["trackstat","setrating",this.toSet[0],this.value]).then(function(b){a.toSet.shift();a.setRating()})},i18n:function(a){return this.show?
i18n(a):a}},watch:{show:function(a){this.$store.commit("dialogOpen",{name:"rating",shown:a})}}});
